<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Mutante ESP8266 en Simba: Referencia del Archivo mp3_decoder.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mutante ESP8266 en Simba
   &#160;<span id="projectnumber">v2.4</span>
   </div>
   <div id="projectbrief">Cliente Websocket del servidor Cerebro para el ESP8266 con Simba</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li><a href="annotated.html"><span>Clases</span></a></li>
      <li class="current"><a href="files.html"><span>Archivos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Lista&#160;de&#160;archivos</span></a></li>
      <li><a href="globals.html"><span>Miembros&#160;de&#160;los&#160;ficheros</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">'defines'</a> &#124;
<a href="#func-members">Funciones</a>  </div>
  <div class="headertitle">
<div class="title">Referencia del Archivo mp3_decoder.c</div>  </div>
</div><!--header-->
<div class="contents">

<p>Código - Comunicación con el módulo VS1003.  
<a href="#details">Más...</a></p>
<div class="textblock"><code>#include &quot;simba.h&quot;</code><br />
<code>#include &quot;<a class="el" href="mp3__decoder_8h_source.html">mp3_decoder.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Dependencia gráfica adjunta para mp3_decoder.c:</div>
<div class="dyncontent">
<div class="center"><img src="mp3__decoder_8c__incl.png" border="0" usemap="#mp3__decoder_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
'defines'</h2></td></tr>
<tr class="memitem:af7dc54392e24e95e8be62cea7896b926"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7dc54392e24e95e8be62cea7896b926"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_MODE</b>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:af7dc54392e24e95e8be62cea7896b926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add6851abf032886c9ba3fd4b63991c59"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add6851abf032886c9ba3fd4b63991c59"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_STATUS</b>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:add6851abf032886c9ba3fd4b63991c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1678887e1ea2a6f03ec762f7b351ab6b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1678887e1ea2a6f03ec762f7b351ab6b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_BASS</b>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:a1678887e1ea2a6f03ec762f7b351ab6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a259006902b81270a1cd7506b3c315ee3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a259006902b81270a1cd7506b3c315ee3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_CLOCKF</b>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:a259006902b81270a1cd7506b3c315ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70a5ef67f28bbbe578eca237450e3c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae70a5ef67f28bbbe578eca237450e3c1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_DECODE_TIME</b>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:ae70a5ef67f28bbbe578eca237450e3c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4836ab2e9b19aaa0441c859cdb1456"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae4836ab2e9b19aaa0441c859cdb1456"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AUDATA</b>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:aae4836ab2e9b19aaa0441c859cdb1456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff726bf42852036bacf19b4a15879344"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff726bf42852036bacf19b4a15879344"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_WRAM</b>&#160;&#160;&#160;0x06</td></tr>
<tr class="separator:aff726bf42852036bacf19b4a15879344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2191d414c5eb3a2973ebf773c41b607"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2191d414c5eb3a2973ebf773c41b607"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_WRAMADDR</b>&#160;&#160;&#160;0x07</td></tr>
<tr class="separator:af2191d414c5eb3a2973ebf773c41b607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c914a98de56acfa57a400781904c1a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52c914a98de56acfa57a400781904c1a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_HDAT0</b>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:a52c914a98de56acfa57a400781904c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd1e9987a877ecdd8876cf8593882922"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd1e9987a877ecdd8876cf8593882922"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_HDAT1</b>&#160;&#160;&#160;0x09</td></tr>
<tr class="separator:abd1e9987a877ecdd8876cf8593882922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a955fead9f2f6647ccc8a083d45a5e811"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a955fead9f2f6647ccc8a083d45a5e811"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AIADDR</b>&#160;&#160;&#160;0x0A</td></tr>
<tr class="separator:a955fead9f2f6647ccc8a083d45a5e811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe16d04305413900b248ac13532f0de"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acbe16d04305413900b248ac13532f0de"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_VOL</b>&#160;&#160;&#160;0x0B</td></tr>
<tr class="separator:acbe16d04305413900b248ac13532f0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0803dabe6c2a79d4ef6e3c2493ef7c2b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0803dabe6c2a79d4ef6e3c2493ef7c2b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AICTRL0</b>&#160;&#160;&#160;0x0C</td></tr>
<tr class="separator:a0803dabe6c2a79d4ef6e3c2493ef7c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef063d30c43b96df9d3d3767ed80210e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef063d30c43b96df9d3d3767ed80210e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AICTRL1</b>&#160;&#160;&#160;0x0D</td></tr>
<tr class="separator:aef063d30c43b96df9d3d3767ed80210e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bdf3d16eae82d396ffc3fc6d0c209fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7bdf3d16eae82d396ffc3fc6d0c209fa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AICTRL2</b>&#160;&#160;&#160;0x0E</td></tr>
<tr class="separator:a7bdf3d16eae82d396ffc3fc6d0c209fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69aed2a986aef3fc6f862ae295dc81b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69aed2a986aef3fc6f862ae295dc81b0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCI_AICTRL3</b>&#160;&#160;&#160;0x0F</td></tr>
<tr class="separator:a69aed2a986aef3fc6f862ae295dc81b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funciones</h2></td></tr>
<tr class="memitem:a511987aa5fb1699717a284e06e9224d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mp3__decoder_8c.html#a511987aa5fb1699717a284e06e9224d0">Mp3WriteRegister</a> (unsigned char addressbyte, unsigned char highbyte, unsigned char lowbyte)</td></tr>
<tr class="memdesc:a511987aa5fb1699717a284e06e9224d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configura un registro del módulo VS1003.  <a href="#a511987aa5fb1699717a284e06e9224d0">Más...</a><br /></td></tr>
<tr class="separator:a511987aa5fb1699717a284e06e9224d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c9835851112c4e11767e4fefbc1466"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mp3__decoder_8c.html#a14c9835851112c4e11767e4fefbc1466">time_sub</a> (struct time_t *res, struct time_t *left, struct time_t *right)</td></tr>
<tr class="memdesc:a14c9835851112c4e11767e4fefbc1466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resta de tiempo.  <a href="#a14c9835851112c4e11767e4fefbc1466">Más...</a><br /></td></tr>
<tr class="separator:a14c9835851112c4e11767e4fefbc1466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb017eb1909c9515a4ba9e8f0ce4c77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mp3__decoder_8c.html#aebb017eb1909c9515a4ba9e8f0ce4c77">configureMp3</a> (void)</td></tr>
<tr class="memdesc:aebb017eb1909c9515a4ba9e8f0ce4c77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configura el módulo Mp3.  <a href="#aebb017eb1909c9515a4ba9e8f0ce4c77">Más...</a><br /></td></tr>
<tr class="separator:aebb017eb1909c9515a4ba9e8f0ce4c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c998d3fdf3b857b75231d980498ea7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mp3__decoder_8c.html#a91c998d3fdf3b857b75231d980498ea7">sendMp3</a> (uint8_t *buf_p, size_t size)</td></tr>
<tr class="memdesc:a91c998d3fdf3b857b75231d980498ea7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envía datos al descodificador por SPI.  <a href="#a91c998d3fdf3b857b75231d980498ea7">Más...</a><br /></td></tr>
<tr class="separator:a91c998d3fdf3b857b75231d980498ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>Código - Comunicación con el módulo VS1003. </p>
<p>Comunicación a través de SPI con el módulo VS1003. Usamos el SPI para configurar el módulo y para enviarle datos que pueda descodificar.</p>
<dl class="section version"><dt>Versión</dt><dd>2.4 </dd></dl>
<dl class="section author"><dt>Autor</dt><dd>David González Filoso <a href="#" onclick="location.href='mai'+'lto:'+'dgf'+'il'+'oso'+'@b'+'105'+'.u'+'pm.'+'es'; return false;">dgfil<span style="display: none;">.nosp@m.</span>oso@<span style="display: none;">.nosp@m.</span>b105.<span style="display: none;">.nosp@m.</span>upm.<span style="display: none;">.nosp@m.</span>es</a>  B105 - Electronic Systems Lab </dd></dl>
</div><h2 class="groupheader">Documentación de las funciones</h2>
<a class="anchor" id="aebb017eb1909c9515a4ba9e8f0ce4c77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configureMp3 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configura el módulo Mp3. </p>
<p>Inicia el SPI del ESP8266 indicando que se va a usar el bus SPI 0 y que va a funcionar como maestro. También se indica que se va a transmitir a 8Mbps y los pines que se van a usar para controlar el módulo. Estos pines son los que necesita el módulo, DREQ indica si la FiFo esta llena, XRST resetea el módulo, XCS es el chip select para mandar comandos al módulo y XDCS es el chip select para mandar datos.</p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a511987aa5fb1699717a284e06e9224d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mp3WriteRegister </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addressbyte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>highbyte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>lowbyte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configura un registro del módulo VS1003. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">addressbyte</td><td>Dirección del registro de 16 bits que se quiere cambiar </td></tr>
    <tr><td class="paramname">highbyte</td><td>Byte alto que se quiere poner en el registro (bit 15 al 8) </td></tr>
    <tr><td class="paramname">lowbyte</td><td>Byte bajo que se quiere poner en el registro (bit 7 al 0) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a91c998d3fdf3b857b75231d980498ea7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendMp3 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Envía datos al descodificador por SPI. </p>
<p>Toma un buffer de datos y los va transmisitiendo de 32 bytes en 32 bytes al módulo VS1003</p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_p</td><td>Puntero a un buffer de bytes </td></tr>
    <tr><td class="paramname">size</td><td>Tamaño del buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a14c9835851112c4e11767e4fefbc1466"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void time_sub </td>
          <td>(</td>
          <td class="paramtype">struct time_t *&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct time_t *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct time_t *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resta de tiempo. </p>
<p>Resta tiempos a través de estructuras tipo time_t</p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">res</td><td>Puntero a struct time_t donde se guarda el resultado de la operación </td></tr>
    <tr><td class="paramname">left</td><td>Puntero a struct time_t que contiene el minuendo </td></tr>
    <tr><td class="paramname">right</td><td>Puntero a struct time_t que contiene el sustraendo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generado por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
